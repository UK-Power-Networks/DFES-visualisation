<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width" />
	<title>UK Power Networks DFES 2020</title>
	<link rel="StyleSheet" href="resources/nouislider.min.css" type="text/css" />
	<link rel="StyleSheet" href="resources/leaflet.css" type="text/css" />
	<link rel="StyleSheet" href="resources/stuquery.barchart.css" type="text/css" />
	<link rel="StyleSheet" href="resources/style.css" type="text/css" />
	<link href="favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
	<script type="text/javascript" src="resources/stuquery.js"></script>
	<script type="text/javascript" src="resources/nouislider.min.js"></script>
	<script type="text/javascript" src="resources/typeahead.js"></script>
	<script type="text/javascript" src="resources/dom-to-image.min.js"></script>
	<script type="text/javascript" src="resources/dfes.js"></script>
	<script type="text/javascript" src="resources/config.js"></script>
	<script type="text/javascript" src="resources/leaflet.js"></script>
	<script type="text/javascript" src="resources/stuquery.barchart.min.js"></script>
</head>
<body>
	<div class="c14-bg message">
		<div class="holder" style="text-align:center;padding:1rem 0;">This tool is a proof-of-concept prototype under development and may not show representative values.</div>
	</div>
	<header class="b2-bg">
		<div class="holder">
			<a href="https://odileeds.org/" class="ODIlogo"><img alt="ODI Leeds"
					src="https://odileeds.org/resources/images/odileeds.svg" title="ODI Leeds"></a>
			<a href="https://www.ukpowernetworks.co.uk/"><img alt="UK Power Networks"
					src="https://odileeds.org/dashboard/data/img/ukpn.svg" title="UK Power Networks"></a>
			<a href="http://www.element-energy.co.uk/"><img alt="Element Energy"
					src="https://odileeds.org/dashboard/data/img/elementenergy.svg" title="Element Energy"></a>
		</div>
		<div class="title">
			<div class="holder">
				<h1>UK Power Networks Distribution Future Energy Scenarios 2020</h1>
			</div>
		</div>
	</header>


	<div class="b6-bg" id="scenario">
		<div class="holder columns">
			<div class="left">
				<p>UKPN's potential future scenarios as interpreted from the 2019 <a href="http://fes.nationalgrid.com/media/1409/fes-2019.pdf">National Grid Future Energy Scenarios</a>.</p>
				<h2><label for="scenarios">Choose a scenario</label>:</h2>
				<div id="scenario-holder"></div>
				<h2><label for="parameters">Choose a parameter</label>:</h2>
				<div id="parameter-holder"></div>
				<h2><label for="views">View by</label>:</h2>
				<div id="view-holder"></div>
				<h2>Select year (<span class="year"></span>):</h2>
				<div id="slider"></div>
				<div><button id="play" class="scenario" title="Play">&#9658;</button> <button id="pause" class="scenario" title="Pause" disabled>&#10074;&#10074;</button></div>
				<h2><label for="scale-mode">Colour scale</label>:</h2>
				<div id="scale-holder" class="toggleinput toggler">
					<span class="toggle-label1" title="To compare the values of different areas for the current year">In year</span>
					<div class="toggle-bg">
						<input type="checkbox" id="scale-mode" name="scale-mode" title="Select for an absolute scale" />
						<span class="switch"></span>
					</div>
					<label class="toggle-label2" for="scale-mode" title="To compare the values of different areas across the the full range of years">By 2050</label>
				</div>
			</div>
			<div class="right">
				<div id="map">
					<div class="spinner">
						<img src="https://odileeds.org/resources/images/odi.svg" alt="Loading..." />
					</div>
				</div>
				<div id="scale"></div>
				<div id="issues"><a href="#" onClick="saveMap();">Save map as PNG</a> | <a href="https://github.com/odileeds/ukpowernetworks/tree/master/2020-DFES/data/scenarios/lsoa">Get the data</a> | <a href="https://github.com/odileeds/ukpowernetworks/issues/">Report any issues you find</a> with our tool</div>
			</div>
		</div>
	</div>
	<div class="scenario line"></div>
	<div class="about tallpadded">
		<div class="holder">
			<h2>About this visualisation - DFES 2020</h2>
			<p>This interactive heat map displays our Distribution Future Energy Scenarios (DFES) forecasts for key drivers within our licence area out to 2050.
			The scenarios are designed to illustrate energy futures with different levels of decentralisation, decarbonisation, and digitalisation.
			We are always keen to understand what our stakeholders think, and so if you have any thoughts, let us know by emailing DFES@ukpowernetworks.co.uk</p>
		</div>
	</div>
	<footer class="tallpadded">
		<div class="holder">
			<h2>Credits</h2>
			<h3>Interactive visualisation</h3>
			<p>&copy; ODI Leeds (Stuart Lowe &amp; Patrick Lake) 2020. Released under an <a href="https://github.com/odileeds/ukpowernetworks/blob/master/LICENSE">MIT licence</a>. View the <a href="https://github.com/odileeds/ukpowernetworks">repository on Github</a>.</p>
			<h3>Energy scenario data</h3>
			<p>&copy; UK Power Networks &amp; ElementEnergy 2020. Released under a Creative Commons Attribution Licence.</p>
			<h3>Geographic boundaries</h3>
			<p><a href="https://geoportal.statistics.gov.uk/datasets/local-authority-districts-may-2020-boundaries-uk-bfe">Local Authority District boundaries (May 2020)</a> and <a href="https://geoportal.statistics.gov.uk/datasets/local-enterprise-partnerships-april-2020-boundaries-en-bfe">Local Enterprise Partnership boundaries (April 2020)</a> use data from the ONS geo service. They are <a href="https://www.ons.gov.uk/methodology/geography/licences">released under the OGL</a>:</p>
			<ul>
				<li>Contains National Statistics data © Crown copyright and database right 2020</li>
				<li>Contains OS data © Crown copyright and database right 2020</li>
			</ul>
		</div>
	</footer>
	<div class="scenario line"></div>
	<script>
	function saveMap(){
		el = document.getElementById('map');

		function filter(node){
			if(node && node.classList) return !(node.classList.contains('leaflet-top') && node.classList.contains('leaflet-left'));
			else return true;
		}

		domtoimage.toPng(el,{filter:filter,'height':el.offsetHeight,'width':el.offsetWidth}).then(function(dataUrl){
			var link = document.createElement('a');
			link.download = 'map.png';
			link.href = dataUrl;
			link.click();
		});
	}
	</script>
</body>
</html>
